{"id":"QCba","dependencies":[{"name":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\package.json","includedInParent":true,"mtime":1609120493490},{"name":"browser-image-compression","loc":{"line":37,"column":29},"parent":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\index.ts","resolved":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\node_modules\\browser-image-compression\\dist\\browser-image-compression.mjs"},{"name":"filesize","loc":{"line":38,"column":21},"parent":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\index.ts","resolved":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\node_modules\\filesize\\lib\\filesize.min.js"},{"name":"jszip","loc":{"line":39,"column":18},"parent":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\index.ts","resolved":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\node_modules\\jszip\\lib\\index.js"},{"name":"file-saver","loc":{"line":40,"column":22},"parent":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\index.ts","resolved":"C:\\Users\\jaeds\\Git Projects\\Locicomp\\public-source\\node_modules\\file-saver\\dist\\FileSaver.min.js"}],"generated":{"js":"var $QCba$exports={};$parcel$require(\"QCba\",\"browser-image-compression\"),$parcel$require(\"QCba\",\"filesize\"),$parcel$require(\"QCba\",\"jszip\"),$parcel$require(\"QCba\",\"file-saver\");var $QCba$var$__awaiter=$QCba$exports&&$QCba$exports.__awaiter||function(e,r,t,n){return new(t||(t=Promise))(function(a,i){function s(e){try{u(n.next(e))}catch(r){i(r)}}function o(e){try{u(n.throw(e))}catch(r){i(r)}}function u(e){var r;e.done?a(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(s,o)}u((n=n.apply(e,r||[])).next())})},$QCba$var$__generator=$QCba$exports&&$QCba$exports.__generator||function(e,r){var t,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=r.call(e,s)}catch(o){i=[6,o],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};function $QCba$var$jump(e){location.replace(\"#\"+e)}var $QCba$var$Image=function(){function e(e){this.originalFile=e,this.currentCompressedQuality=1}return Object.defineProperty(e.prototype,\"originalSize\",{get:function(){return $QCba$import$filesize(this.originalFile.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,\"newSize\",{get:function(){return $QCba$import$filesize(this.compressedFile.size)},enumerable:!1,configurable:!0}),e.prototype.compress=function(e,r){return $QCba$var$__awaiter(this,void 0,Promise,function(){var t,n,a;return $QCba$var$__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=this,[4,$QCba$import$imageCompression(this.originalFile,{initialQuality:e,useWebWorker:!0,maxIteration:50,onProgress:r})];case 1:return t.compressedFile=i.sent(),n=this,[4,$QCba$import$imageCompression.getDataUrlFromFile(this.compressedFile)];case 2:return n.compressedData=i.sent(),this.currentCompressedQuality=e,[3,4];case 3:return a=i.sent(),console.log(a),[3,4];case 4:return[2]}})})},e.prototype.createView=function(e,r){return'\\n        <div id=\"item-'+e+'\" class=\"carousel-item\">\\n            <h2 style=\"margin: 0;\">Image '+(e+1)+\" of \"+r+\"<span> was compressed from \"+this.originalSize+\" to \"+this.newSize+'</span></h2>\\n            <div style=\"position: relative;\">\\n            <div style=\"width: 100%;max-height: 400px;overflow-y: auto;\">\\n                <img style=\"width: 100%;vertical-align: middle;\" src=\"'+this.compressedData+'\"/>\\n            </div>\\n            <a class=\"arrow-container arrow-container-prev\" href=\"#item-'+(0==e?r-1:e-1)+'\"><div class=\"arrow arrow-prev\"></div></a>\\n            <a class=\"arrow-container arrow-container-next\" href=\"#item-'+(e==r-1?0:e+1)+'\"><div class=\"arrow arrow-next\"></div></a>\\n            </div>\\n        </div>\\n        '},e}(),$QCba$var$currentImages=[];function $QCba$var$updateState(e){var r=document.getElementById(\"images\"),t=document.getElementById(\"level\"),n=document.getElementById(\"save\");r.disabled=t.disabled=n.disabled=e}function $QCba$var$updateViewSaving(e){$QCba$var$updateState(e);var r=document.getElementById(\"savingProgress\");return r.style.display=e?\"block\":\"none\",r}function $QCba$var$updateViewCompressing(e){$QCba$var$updateState(e);var r=document.getElementById(\"compressingProgress\");(r.style.display=e?\"block\":\"none\",e)||(document.getElementById(\"afterCompression\").style.display=\"block\",document.getElementById(\"compress\").style.display=\"none\");return r}function $QCba$var$sleep(e){return new Promise(function(r){return setTimeout(r,1e3*e)})}function $QCba$var$addImages(e){return $QCba$var$__awaiter(this,void 0,void 0,function(){var r,t;return $QCba$var$__generator(this,function(n){return e?(r=Array.from(e.target.files),0==(t=($QCba$var$currentImages.length>0?r.filter(function(e){return!$QCba$var$currentImages.some(function(r){return r.originalFile.name==e.name})}):r).map(function(e){return new $QCba$var$Image(e)})).length?(alert(\"Simultaneous compression of images with the same name is not possible.\"),[2]):($QCba$var$currentImages.push.apply($QCba$var$currentImages,t),$QCba$var$showCompressButtonAndHideResults(),[2])):[2]})})}function $QCba$var$compressionLevelChanged(e){e&&($QCba$var$isCompressionAvailable($QCba$var$getDesiredQuality())&&$QCba$var$showCompressButtonAndHideResults())}function $QCba$var$getDesiredQuality(){var e=document.getElementById(\"level\");return parseInt(e.value)/100}function $QCba$var$isCompressionAvailable(e){return $QCba$var$currentImages.some(function(r){return r.currentCompressedQuality!=e})}function $QCba$var$showCompressButtonAndHideResults(){document.getElementById(\"compress\").style.display=\"block\",document.getElementById(\"afterCompression\").style.display=\"none\"}function $QCba$var$compressImages(e){return $QCba$var$__awaiter(this,void 0,void 0,function(){var r,t,n,a,i,s,o,u;return $QCba$var$__generator(this,function($){switch($.label){case 0:if(!e)return[2];if(r=$QCba$var$getDesiredQuality(),0==(t=$QCba$var$currentImages.filter(function(e){return e.currentCompressedQuality!=r})).length)return $QCba$var$updateViewCompressing(!1),[2];n=$QCba$var$updateViewCompressing(!0),a=t.length,i=100/a,s=function(e){return $QCba$var$__generator(this,function(a){switch(a.label){case 0:return[4,t[e].compress(r,function(r){return n.value=r+e*i})];case 1:return a.sent(),[2]}})},o=0,$.label=1;case 1:return o<a?[5,s(o)]:[3,4];case 2:$.sent(),$.label=3;case 3:return o++,[3,1];case 4:return u=$QCba$var$currentImages.map(function(e,r){return e.createView(r,$QCba$var$currentImages.length)}).join(\"\"),document.getElementById(\"results-carousel\").innerHTML=u,[4,$QCba$var$sleep(1)];case 5:return $.sent(),$QCba$var$updateViewCompressing(!1),$QCba$var$jump(\"item-0\"),n.value=0,[2]}})})}function $QCba$var$saveResults(e){return $QCba$var$__awaiter(this,void 0,void 0,function(){var r,t,n;return $QCba$var$__generator(this,function(a){switch(a.label){case 0:return e?0==$QCba$var$currentImages.length?(alert(\"Nothing to save: You haven't compressed any image yet.\"),[2]):(r=$QCba$var$updateViewSaving(!0),t=new $QCba$import$JSZip,$QCba$var$currentImages.forEach(function(e){return t.file(e.originalFile.name,e.compressedFile)}),[4,t.generateAsync({type:\"blob\",compression:\"DEFLATE\",compressionOptions:{level:1}},function(e){return r.value=e.percent})]):[2];case 1:return n=a.sent(),$QCba$import$FileSaver.saveAs(n,\"compressed images.zip\"),[4,$QCba$var$sleep(1)];case 2:return a.sent(),$QCba$var$updateViewSaving(!1),r.value=0,[2]}})})}document.addEventListener(\"DOMContentLoaded\",function(e){document.getElementById(\"images\").onchange=function(e){return $QCba$var$addImages(e)},document.getElementById(\"level\").onchange=function(e){return $QCba$var$compressionLevelChanged(e)},document.getElementById(\"save\").onclick=function(e){return $QCba$var$saveResults(e)},document.getElementById(\"compress\").onclick=function(e){return $QCba$var$compressImages(e)}});"},"sourceMaps":null,"error":null,"hash":"678cec6e82c7175e1a34e9a0b1c1ab79","cacheData":{"env":{},"imports":{"$QCba$import$imageCompression":["browser-image-compression","default"],"$QCba$import$filesize":["filesize","default"],"$QCba$import$JSZip":["jszip","default"],"$QCba$import$FileSaver":["file-saver","default"]},"exports":{},"wildcards":[],"sideEffects":true,"isCommonJS":true}}